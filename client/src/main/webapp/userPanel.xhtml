<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<style type="text/css">
.userRow {
	background-image: none !important;
	color: #00BFFF !important;
	font-weight: bold !important;
}
</style>
</h:head>
<h:body>

	<h:form id="tableForm">
		<p:outputPanel rendered="#{stats.user eq null}">
			<h1>Panel de Usuario</h1>
		</p:outputPanel>
		<p:panel id="loginPanel" widgetVar="loginWgt"
			rendered="#{stats.user eq null}">

			<h:outputText value="Usuario:" />
			<p:inputText id="user" value="#{username}" required="true" />
			<br />
			<br />
			<h:outputText value="Contrase침a:" />
			<p:password id="pass" value="#{pass}" />
			<br />
			<br />
			<p:commandButton value="Login" id="f1Button"
				actionListener="#{stats.login(username,pass)}" update=":tableForm">
			</p:commandButton>
			<p:messages id="loginMsg" showDetail="false" autoUpdate="true"
				closable="true" />
		</p:panel>
		<br />
		<br />

		<p:panel widgetVar="dataWgt" id="dataPanel"
			rendered="#{stats.user ne null}">
			<p:outputPanel>
				<h1>Informaci칩n del Jugador</h1>
			</p:outputPanel>

			<h:outputText value="#{stats.user.name}" style="font-weight:bold;" />
			<br />
			<h:outputText value="Posici칩n:" />
			<h:outputText value="#{stats.user.player.position}"
				style="font-weight:bold;" />
			<br />
			<h:outputText value="Estado:" />
			<h:outputText value="#{stats.user.player.status}"
				style="font-weight:bold;" />
			<br />
			
			<p:outputPanel rendered="#{stats.data ne null}">
				<h1>Ranking</h1>
			</p:outputPanel>
			<p:dataTable widgetVar="scoreWgt" sortBy="#{stat.score}"
				sortOrder="descending" var="stat" id="scoreTable"
				value="#{stats.data}" rendered="#{stats.data ne null}"
				rowStyleClass="#{stats.user.name eq stat.player.user.name ? 'userRow' : null}">
				<p:column headerText="Nombre">
					<h:outputText value="#{stat.player.user.name}" />
				</p:column>

				<p:column headerText="Puntuaci칩n">
					<h:outputText value="#{stat.score}" />
				</p:column>

				<p:column headerText="Partidos Jugados">
					<h:outputText value="#{stat.matchesplayed}" />
				</p:column>

				<p:column headerText="Goles">
					<h:outputText value="#{stat.goals}" />
				</p:column>
			</p:dataTable>
		</p:panel>
	</h:form>

</h:body>
</html>
